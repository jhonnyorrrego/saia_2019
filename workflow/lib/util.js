var Util={getBounds:function(c){if(!c.length){return null}var a=c[0].x;var e=a;var f=c[0].y;var d=f;for(var b=1;b<c.length;b++){a=Math.min(a,c[b].x);f=Math.min(f,c[b].y);e=Math.max(e,c[b].x);d=Math.max(d,c[b].y)}return[a,f,e,d]},getUnionBounds:function(a){},feather:function(b,a){return[b[0]+a,b[1]+a,b[2]+a,b[3]+a]},distance:function(b,a){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},round:function(b,a){return Math.round(b*Math.pow(10,a))/Math.pow(10,a)},getLength:function(b,a){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},getPolylineLength:function(b){var a=0;for(var c=0;c<b.length-1;c++){a+=Util.getLength(b[c],b[c+1])}return a},lineIntersectsRectangle:function(f,d,e){var b=new Line(f,d);var a=[];a.push(new Line(new Point(e[0],e[1]),new Point(e[2],e[1])));a.push(new Line(new Point(e[2],e[1]),new Point(e[2],e[3])));a.push(new Line(new Point(e[2],e[3]),new Point(e[0],e[3])));a.push(new Line(new Point(e[0],e[3]),new Point(e[0],e[1])));for(var c=0;c<a.length;c++){if(this.lineIntersectsLine(b,a[c])){return true}}return false},lineIntersectsLine:function(g,f){if(g.startPoint.x==g.endPoint.x&&f.startPoint.x==f.endPoint.x){return g.startPoint.x==f.startPoint.x?g.contains(f.startPoint.x,f.startPoint.y)||g.contains(f.endPoint.x,f.endPoint.y):false}else{if(g.startPoint.x==g.endPoint.x||f.startPoint.x==f.endPoint.x){if(g.startPoint.x==g.endPoint.x){var h=g;g=f;f=h}var m=(g.endPoint.y-g.startPoint.y)/(g.endPoint.x-g.startPoint.x);var j=g.startPoint.y-m*g.startPoint.x;var e=f.startPoint.x;var n=m*e+j;return g.contains(e,n)&&f.contains(e,n)}else{var d=(g.endPoint.y-g.startPoint.y)/(g.endPoint.x-g.startPoint.x);var k=g.startPoint.y-d*g.startPoint.x;var c=(f.endPoint.y-f.startPoint.y)/(f.endPoint.x-f.startPoint.x);var i=f.startPoint.y-c*f.startPoint.x;if(d==c){return k==i?g.contains(f.startPoint.x,f.startPoint.y)||g.contains(f.endPoint.x,f.endPoint.y):false}else{e=(i-k)/(d-c);n=d*e+k;return g.contains(e,n)&&f.contains(e,n)}}}},getEndPoint:function(c,b,d){var a=c.clone();a.transform(Matrix.translationMatrix(-c.x,-c.y));a.y-=b;a.transform(Matrix.rotationMatrix(d));a.transform(Matrix.translationMatrix(c.x,c.y));return a},getAngle:function(d,a,b){d.x=Util.round(d.x,5);d.y=Util.round(d.y,5);a.x=Util.round(a.x,5);a.y=Util.round(a.y,5);var c=Math.atan((a.x-d.x)/(a.y-d.y));c=-c;if(a.x>=d.x&&a.y>=d.y){c+=Math.PI}else{if(a.x<=d.x&&a.y>=d.y){c+=Math.PI}else{if(a.x<=d.x&&a.y<=d.y){c+=Math.PI*2}}}while(c>=Math.PI*2){c-=Math.PI*2}if(isNaN(c)){c=0}if(b){c=Math.round(c/b)*b}return c},getAngle3Points:function(e,g,d,c){var b=Util.getAngle(g,e);var a=Util.getAngle(g,d);var f=a-b;if(c){f=Math.round(f/c)*c}return f},isPointInside:function(a,e){if(e.length<3){return false}var b=0;var g=e[0];for(var d=1;d<=e.length;d++){var f=e[d%e.length];if(a.y>Math.min(g.y,f.y)){if(a.y<=Math.max(g.y,f.y)){if(a.x<=Math.max(g.x,f.x)){if(g.y!=f.y){var c=(a.y-g.y)*(f.x-g.x)/(f.y-g.y)+g.x;if(g.x==f.x||a.x<=c){b++}}}}}g=f}if(b%2==0){return false}else{return true}},pointCrossingsForLine:function(d,b,c,f,a,e){if(b<f&&b<e){return 0}if(b>=f&&b>=e){return 0}if(d>=c&&d>=a){return 0}if(d<c&&d<a){return(f<e)?1:-1}var g=c+(b-f)*(a-c)/(e-f);if(d>=g){return 0}return(f<e)?1:-1},pointCrossingsForCubic:function(q,n,c,p,i,m,g,j,b,l,a){if(n<p&&n<m&&n<j&&n<l){return 0}if(n>=p&&n>=m&&n>=j&&n>=l){return 0}if(q>=c&&q>=i&&q>=g&&q>=b){return 0}if(q<c&&q<i&&q<g&&q<b){if(n>=p){if(n<l){return 1}}else{if(n>=l){return -1}}return 0}if(a>52){return pointCrossingsForLine(q,n,c,p,b,l)}var f=(i+g)/2;var d=(m+j)/2;i=(c+i)/2;m=(p+m)/2;g=(g+b)/2;j=(j+l)/2;var k=(i+f)/2;var e=(m+d)/2;var o=(f+g)/2;var h=(d+j)/2;f=(k+o)/2;d=(e+h)/2;if(isNaN(f)||isNaN(d)){return 0}return(Util.pointCrossingsForCubic(q,n,c,p,i,m,k,e,f,d,a+1)+Util.pointCrossingsForCubic(q,n,f,d,o,h,g,j,b,l,a+1))},min:function(b){if(b.lenght==0){return NaN}else{var a=b[0];for(var c=0;c<b.length;c++){if(a>b[c]){a=b[c]}}return a}},max:function(b){if(b.lenght==0){return NaN}else{var a=b[0];for(var c=0;c<b.length;c++){if(a<b[c]){a=b[c]}}return a}}};function signum(a){if(a>0){return 1}else{if(a<0){return -1}else{return 0}}}function isNumeric(a){return(a-0)==a&&(a.length>0||a!="")};